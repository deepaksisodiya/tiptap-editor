{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/Demo.vue?5a7b","webpack:///./src/components/blocks/embed/Embed.vue?f465","webpack:///./src/App.vue?b1df","webpack:///./src/Demo.vue?d377","webpack:///./src/components/Article.vue?19b4","webpack:///./src/components/EditorFloatingMenu.vue?ddc0","webpack:///./src/extensions/FloatingMenu.js","webpack:///src/components/EditorFloatingMenu.vue","webpack:///./src/components/EditorFloatingMenu.vue?3ce4","webpack:///./src/components/EditorFloatingMenu.vue","webpack:///./src/components/EditorMenuBubble.vue?ce87","webpack:///./src/utils/browser.js","webpack:///./src/extensions/MenuBubble.js","webpack:///./src/utils/index.js","webpack:///src/components/EditorMenuBubble.vue","webpack:///./src/components/EditorMenuBubble.vue?5a4b","webpack:///./src/components/EditorMenuBubble.vue","webpack:///./src/components/blocks/Doc.js","webpack:///./src/components/blocks/embed/Embed.vue?aada","webpack:///src/components/blocks/embed/Embed.vue","webpack:///./src/components/blocks/embed/Embed.vue?56f0","webpack:///./src/components/blocks/embed/Embed.vue","webpack:///./src/components/blocks/embed/Embed.js","webpack:///./src/components/blocks/image/Image.vue?c3fb","webpack:///src/components/blocks/image/Image.vue","webpack:///./src/components/blocks/image/Image.vue?db8c","webpack:///./src/components/blocks/image/Image.vue","webpack:///./src/components/blocks/image/Image.js","webpack:///./src/components/blocks/Title.js","webpack:///./src/components/blocks/Lock.js","webpack:///./src/components/blocks/HorizontalRule.js","webpack:///./src/components/blocks/Header.js","webpack:///./src/components/blocks/featureImage/FeatureImage.vue?ceb7","webpack:///src/components/blocks/featureImage/FeatureImage.vue","webpack:///./src/components/blocks/featureImage/FeatureImage.vue?0a8e","webpack:///./src/components/blocks/featureImage/FeatureImage.vue","webpack:///./src/components/blocks/featureImage/index.js","webpack:///./src/components/blocks/Superscript.js","webpack:///./src/components/blocks/audio/Audio.vue?9f50","webpack:///src/components/blocks/audio/Audio.vue","webpack:///./src/components/blocks/audio/Audio.vue?0cbc","webpack:///./src/components/blocks/audio/Audio.vue","webpack:///./src/components/blocks/audio/index.js","webpack:///./src/extensions/Placeholder.js","webpack:///./src/utils/dom.js","webpack:///src/components/Article.vue","webpack:///./src/components/Article.vue?f211","webpack:///./src/components/Article.vue","webpack:///src/Demo.vue","webpack:///./src/Demo.vue?2435","webpack:///./src/Demo.vue?4a34","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/components/Article.vue?7f03"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","staticRenderFns","staticClass","attrs","onUpdatePost","uploadImage","uploadAudio","getEmbeds","getContent","blocks","editor","ref","beforeUpload","_v","class","menu","isActive","style","top","directives","rawName","expression","on","$event","previewFiles","commands","image","previewAudio","audio","toggleMenu","shouldShowMenu","onClickImage","_e","embed","onClickEmbed","onClickAudio","ordered_list","onClickMenuItem","horizontal_rule","staticStyle","flattenV","rect","left","width","x","right","bottom","Menu","options","editorView","resizeObserver","element","onUpdate","preventHide","mousedownHandler","handleClick","addEventListener","capture","focusHandler","view","update","blurHandler","event","hide","ResizeObserver","observe","dom","lastState","state","doc","content","isEmpty","children","textContent","isIos","test","navigator","userAgent","MSStream","isImageNode","type","includes","hasFocus","eq","selection","empty","currentDom","domAtPos","anchor","node","innerHTML","tagName","parentNode","parent","offsetParent","editorBoundings","getBoundingClientRect","cursorBoundings","coordsAtPos","sendUpdate","relatedTarget","contains","removeEventListener","unobserve","off","Plugin","PluginKey","props","default","Function","addImageAt","addAudioAt","computed","focused","focus","getMarkAttrs","getNodeAttrs","hasLock","watch","immediate","handler","$nextTick","registerPlugin","setOptions","beforeDestroy","unregisterPlugin","methods","tr","head","$refs","imageInput","click","hideFloatingMenu","audioInput","imageFile","reader","onload","img","src","command","readAsDataURL","audioFile","e","clientX","clientY","setSelection","nodePos","pos","component","isInputActive","ios","getStyle","domProps","indexOf","_k","keyCode","preventDefault","addAnchor","link","href","hideInput","target","composing","isTitleSelected","bold","italic","showInput","_m","heading","level","blockquote","document","ie_edge","exec","ie_upto10","ie_11up","mac","platform","ie","ie_version","documentMode","gecko","gecko_version","chrome","chrome_version","android","webkit","documentElement","safari","vendor","webkit_version","textRange","from","to","range","createRange","setEnd","nodeValue","setStart","singleRect","bias","rects","getClientRects","side","end","docView","domFromPos","offset","nodeType","firstChild","childNodes","child","keepInBounds","start","box","el","firstElementChild","Math","round","min","max","isDataURL","regex","RegExp","match","getValidUrl","url","newUrl","decodeURIComponent","trim","replace","browser","newValue","mounted","fixMenuEl","visualViewport","screen","validUrl","linkDiv","menuUl","CustomDoc","Doc","embeds","deleteNode","isLoading","_s","loadingText","placeholderText","editable","stopPropagation","onClickAdd","active","isButtonActive","embedWrapperClass","html","handleKeydown","caption","selected","shouldShowClose","provider","isError","title","description","thumbnail_url","thumbnail_width","thumbnail_height","inject","getEditorVm","$watch","set","updateAttrs","loadScript","script","createElement","readyState","onreadystatechange","callback","getElementsByTagName","appendChild","loadEmbeds","twttr","widgets","load","instgrm","Embeds","process","createAndMovetoNextParagraph","textSelection","insertText","insert","dispatch","validURL","pattern","str","disableLink","$el","querySelector","onclick","blur","onSelection","EmbedNode","replaceSelectionWith","group","selectable","parseDOM","tag","getAttrs","getAttribute","toDOM","components","Embed","template","Node","onImageClick","fallback","loaded","height","ImageNode","schema","size","nodes","TextSelection","alt","JSON","parse","stringify","handleDOMEvents","drop","hasFiles","dataTransfer","files","images","Array","filter","file","coordinates","posAtCoords","fImgPos","fImg","getPos","forEach","FileReader","readerEvent","ImageComponent","TiptapImage","Title","Enter","anchorAfterEnterKeydown","paragraph","anchorAtEnterKeydown","selectionAtEnterKeydown","resolve","parentOffset","deleteSelection","nodeAt","Backspace","currentNode","nodeAt2","dataUrl","marks","HorizontalRuleNode","TiptapHorizontalRule","removeImage","imageType","Superscript","toggleMark","Mark","disabled","handlePlayerClick","handlePlayerError","onLoadedMetaData","AudioPlayer","handleError","setCursorBelowBlock","button","newPos","AudioNode","Audio","Placeholder","emptyEditorClass","emptyNodeClass","emptyNodeText","showOnlyWhenEditable","showOnlyCurrent","updateState","decorations","plugins","editablePlugin","find","plugin","startsWith","descendants","hasAnchor","nodeSize","isHeaderNode","isPlaceHolderNode","isNodeEmpty","classes","decoration","Decoration","join","DecorationSet","Extension","keyEvent","createEvent","initEvent","code","required","defaultContent","String","EditorContent","EditorFloatingMenu","EditorMenuBubble","error","occurred","message","selectedEl","undefined","autoFocus","extensions","editorProps","handlePaste","beforeinput","setTimeout","domChangeCount","cursorBeforeDelete","$cursor","keydown","provide","setContent","newContent","addTitle","newData","handleAfterPaste","transaction","Article","VueJsonPretty","Demo","Vue","config","productionTip","render","h","App","$mount"],"mappings":"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","file":"js/app.7b125223.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/tiptap-editor/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Demo.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Demo.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Embed.vue?vue&type=style&index=0&id=151a5591&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Embed.vue?vue&type=style&index=0&id=151a5591&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Demo')}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"demo\"},[_c('div',{staticClass:\"article-container\"},[_c('Article',{attrs:{\"onUpdatePost\":_vm.onUpdatePost,\"uploadImage\":_vm.uploadImage,\"uploadAudio\":_vm.uploadAudio,\"getEmbeds\":_vm.getEmbeds,\"content\":_vm.getContent(),\"delayUpdateBy\":\"300\"}})],1),_c('vue-json-pretty',{attrs:{\"path\":'res',\"data\":_vm.blocks}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"editor\"},[_c('article',[_c('editor-menu-bubble',{attrs:{\"editor\":_vm.editor}}),_c('editor-floating-menu',{ref:\"floatingMenu\",attrs:{\"editor\":_vm.editor,\"before-upload\":_vm.beforeUpload}}),_c('editor-content',{staticClass:\"editor__content\",attrs:{\"id\":\"editor\",\"editor\":_vm.editor}}),_c('div',{staticClass:\"ios-test-fix\"},[_vm._v(\"empt\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"editor__floating-menu\",class:{ 'is-plus-active': _vm.menu.isActive },style:((\"top: \" + (_vm.menu.top - 20) + \"px\"))},[_c('input',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],ref:\"imageInput\",attrs:{\"type\":\"file\",\"id\":\"image-input\",\"accept\":\"image/*\"},on:{\"change\":function($event){return _vm.previewFiles(_vm.commands.image)}}}),_c('input',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],ref:\"audioInput\",attrs:{\"type\":\"file\",\"id\":\"audio-input\"},on:{\"change\":function($event){return _vm.previewAudio(_vm.commands.audio)}}}),_c('ul',{staticClass:\"kitchensink\"},[_c('li',{on:{\"click\":_vm.toggleMenu}},[_c('i',{staticClass:\"add-icon\",class:{ 'close-icon': _vm.shouldShowMenu }})]),(_vm.shouldShowMenu)?_c('li',{on:{\"click\":function($event){return _vm.onClickImage()}}},[_c('i',{staticClass:\"image-icon\"})]):_vm._e(),(_vm.shouldShowMenu)?_c('li',{class:{ 'is-active': _vm.isActive.embed() },on:{\"click\":function($event){return _vm.onClickEmbed(_vm.commands.embed, 'video')}}},[_c('i',{staticClass:\"video-icon\"})]):_vm._e(),(_vm.shouldShowMenu)?_c('li',{on:{\"click\":function($event){return _vm.onClickAudio()}}},[_c('i',{staticClass:\"audio-icon\"})]):_vm._e(),(_vm.shouldShowMenu)?_c('li',{class:{ 'is-active': _vm.isActive.ordered_list() },on:{\"click\":function($event){return _vm.onClickMenuItem(_vm.commands.ordered_list)}}},[_c('i',{staticClass:\"list-icon\"})]):_vm._e(),(_vm.shouldShowMenu)?_c('li',{class:{ 'is-active': _vm.isActive.embed() },on:{\"click\":function($event){return _vm.onClickEmbed(_vm.commands.embed, 'link')}}},[_c('i',{staticClass:\"link-icon\"})]):_vm._e(),(_vm.shouldShowMenu)?_c('li',{class:{ 'is-active': _vm.isActive.horizontal_rule() },on:{\"click\":function($event){return _vm.onClickMenuItem(_vm.commands.horizontal_rule)}}},[_c('i',{staticClass:\"separator-icon\"})]):_vm._e(),(_vm.shouldShowMenu)?_c('li',{staticStyle:{\"display\":\"none\"}},[_c('i',{staticClass:\"kitchensink-divider\"})]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { Plugin, PluginKey } from \"tiptap\";\n\nfunction flattenV(rect, left) {\n  if (rect.width == 0) return rect;\n  let x = left ? rect.left : rect.right;\n  return { top: rect.top, bottom: rect.bottom, left: x, right: x };\n}\n\nclass Menu {\n  constructor({ options, editorView }) {\n    this.options = {\n      ...{\n        resizeObserver: true,\n        element: null,\n        onUpdate: () => false\n      },\n      ...options\n    };\n    this.preventHide = false;\n    this.editorView = editorView;\n    this.isActive = false;\n    this.top = 0;\n\n    // the mousedown event is fired before blur so we can prevent it\n    this.mousedownHandler = this.handleClick.bind(this);\n    this.options.element.addEventListener(\"mousedown\", this.mousedownHandler, {\n      capture: true\n    });\n\n    this.focusHandler = ({ view }) => {\n      this.update(view);\n    };\n    this.options.editor.on(\"focus\", this.focusHandler);\n\n    this.blurHandler = ({ event }) => {\n      if (this.preventHide) {\n        this.preventHide = false;\n        return;\n      }\n\n      this.hide(event);\n    };\n    this.options.editor.on(\"blur\", this.blurHandler);\n\n    // sometimes we have to update the position\n    // because of a loaded images for example\n    if (this.options.resizeObserver && window.ResizeObserver) {\n      this.resizeObserver = new ResizeObserver(() => {\n        if (this.isActive) {\n          this.update(this.editorView);\n        }\n      });\n      this.resizeObserver.observe(this.editorView.dom);\n    }\n  }\n\n  handleClick() {\n    this.preventHide = true;\n  }\n\n  update(view, lastState) {\n    const { state, dom } = view;\n    const length = state.doc.content.content.length;\n    const isEmpty = length === 3 && !dom.children[2].textContent;\n    const isIos =\n      /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n    const isImageNode =\n      isIos &&\n      state.doc.content.content[length - 2].type.name.includes(\"image\");\n\n    // Don't do anything if the document/selection didn't change\n    if (\n      view.hasFocus() &&\n      lastState &&\n      lastState.doc.eq(state.doc) &&\n      lastState.selection.eq(state.selection)\n    ) {\n      return;\n    }\n\n    if (!state.selection.empty) {\n      this.hide();\n      return;\n    }\n\n    const currentDom = view.domAtPos(state.selection.anchor);\n\n    const isActive =\n      isEmpty ||\n      (currentDom.node.innerHTML === \"<br>\" &&\n        currentDom.node.tagName === \"P\" &&\n        currentDom.node.parentNode === view.dom);\n\n    if (!isActive) {\n      this.hide();\n      return;\n    }\n\n    const parent = this.options.element.offsetParent;\n\n    if (!parent) {\n      this.hide();\n      return;\n    }\n\n    const editorBoundings = parent.getBoundingClientRect();\n    const cursorBoundings =\n      isEmpty || isImageNode\n        ? flattenV(\n            dom.children[isImageNode ? length - 1 : 2].getBoundingClientRect(),\n            false\n          )\n        : view.coordsAtPos(state.selection.anchor);\n    const top =\n      cursorBoundings.top -\n      editorBoundings.top +\n      (isEmpty || isImageNode ? 3.5 : 0);\n\n    this.isActive = true;\n    this.top = top;\n\n    this.sendUpdate();\n  }\n\n  sendUpdate() {\n    this.options.onUpdate({\n      isActive: this.isActive,\n      top: this.top\n    });\n  }\n\n  hide(event) {\n    if (\n      event &&\n      event.relatedTarget &&\n      this.options.element.parentNode &&\n      this.options.element.parentNode.contains(event.relatedTarget)\n    ) {\n      return;\n    }\n\n    this.isActive = false;\n    this.sendUpdate();\n  }\n\n  destroy() {\n    this.options.element.removeEventListener(\n      \"mousedown\",\n      this.mousedownHandler\n    );\n\n    if (this.resizeObserver) {\n      this.resizeObserver.unobserve(this.editorView.dom);\n    }\n\n    this.options.editor.off(\"focus\", this.focusHandler);\n    this.options.editor.off(\"blur\", this.blurHandler);\n  }\n}\n\nexport default function(options) {\n  return new Plugin({\n    key: new PluginKey(\"floating_menu\"),\n    view(editorView) {\n      return new Menu({ editorView, options });\n    }\n  });\n}\n","<template>\n  <div\n    class=\"editor__floating-menu\"\n    :class=\"{ 'is-plus-active': menu.isActive }\"\n    :style=\"`top: ${menu.top - 20}px`\"\n  >\n    <input\n      type=\"file\"\n      id=\"image-input\"\n      ref=\"imageInput\"\n      v-show=\"false\"\n      accept=\"image/*\"\n      @change=\"previewFiles(commands.image)\"\n    />\n    <input\n      type=\"file\"\n      id=\"audio-input\"\n      ref=\"audioInput\"\n      v-show=\"false\"\n      @change=\"previewAudio(commands.audio)\"\n    />\n    <ul class=\"kitchensink\">\n      <li @click=\"toggleMenu\">\n        <i class=\"add-icon\" :class=\"{ 'close-icon': shouldShowMenu }\"></i>\n      </li>\n      <li @click=\"onClickImage()\" v-if=\"shouldShowMenu\">\n        <i class=\"image-icon\"></i>\n      </li>\n      <li\n        :class=\"{ 'is-active': isActive.embed() }\"\n        v-if=\"shouldShowMenu\"\n        @click=\"onClickEmbed(commands.embed, 'video')\"\n      >\n        <i class=\"video-icon\"></i>\n      </li>\n      <li @click=\"onClickAudio()\" v-if=\"shouldShowMenu\">\n        <i class=\"audio-icon\"></i>\n      </li>\n      <li\n        v-if=\"shouldShowMenu\"\n        :class=\"{ 'is-active': isActive.ordered_list() }\"\n        @click=\"onClickMenuItem(commands.ordered_list)\"\n      >\n        <i class=\"list-icon\"></i>\n      </li>\n      <li\n        :class=\"{ 'is-active': isActive.embed() }\"\n        v-if=\"shouldShowMenu\"\n        @click=\"onClickEmbed(commands.embed, 'link')\"\n      >\n        <i class=\"link-icon\"></i>\n      </li>\n      <li\n        :class=\"{ 'is-active': isActive.horizontal_rule() }\"\n        v-if=\"shouldShowMenu\"\n        @click=\"onClickMenuItem(commands.horizontal_rule)\"\n      >\n        <i class=\"separator-icon\"></i>\n      </li>\n      <li v-if=\"shouldShowMenu\" style=\"display:none\">\n        <i class=\"kitchensink-divider\"></i>\n      </li>\n      <!--\n              For now disable the lock icon from floating menu kitchsink for pre-alpha relese\n              later do like :style=\"`display: ${hasLock ? 'none' : 'inline'}`\"\n              :style=\"`display: ${hasLock ? 'none' : 'none'}`\"\n      -->\n      <!-- <li\n              v-if=\"shouldShowMenu\"\n              :style=\"`display: ${hasLock ? 'none' : 'none'}`\"\n              :class=\"{ 'is-active': isActive.lock() }\"\n              @click=\"onClickMenuItem(commands.lock)\"\n            >\n              <i class=\"lock-icon\"></i>\n      </li>-->\n    </ul>\n  </div>\n</template>\n\n<script>\nimport FloatingMenu from \"./../extensions/FloatingMenu\";\nimport { contains } from \"prosemirror-utils\";\n\nexport default {\n  props: {\n    editor: {\n      default: null,\n      type: Object\n    },\n    beforeUpload: {\n      type: Function,\n      default: () => true\n    }\n  },\n  data() {\n    return {\n      menu: {\n        isActive: false,\n        left: 0,\n        bottom: 0\n      },\n      addImageAt: null,\n      addAudioAt: null,\n      shouldShowMenu: false\n    };\n  },\n  computed: {\n    focused() {\n      return this.editor.view.focused;\n    },\n    focus() {\n      return this.editor.focus;\n    },\n    commands() {\n      return this.editor.commands;\n    },\n    isActive() {\n      return this.editor.isActive;\n    },\n    getMarkAttrs() {\n      return this.editor.getMarkAttrs.bind(this.editor);\n    },\n    getNodeAttrs() {\n      return (\n        this.editor.getNodeAttrs && this.editor.getNodeAttrs.bind(this.editor)\n      );\n    },\n    hasLock() {\n      return contains(\n        this.editor.view.state.doc,\n        this.editor.schema.nodes.lock\n      );\n    }\n  },\n  watch: {\n    editor: {\n      immediate: true,\n      handler(editor) {\n        if (editor) {\n          if (editor) {\n            this.$nextTick(() => {\n              editor.registerPlugin(\n                FloatingMenu({\n                  editor,\n                  element: this.$el,\n                  onUpdate: menu => {\n                    // the second check ensures event is fired only once\n                    if (menu.isActive && this.menu.isActive === false) {\n                      this.$emit(\"show\", menu);\n                    } else if (!menu.isActive && this.menu.isActive === true) {\n                      this.$emit(\"hide\", menu);\n                    }\n                    this.menu = menu;\n                  }\n                })\n              );\n            });\n          }\n        }\n      }\n    },\n    shouldShowMenu() {\n      const {\n        state: {\n          doc: {\n            content: { content }\n          }\n        }\n      } = this.editor;\n      if (content.length === 2) {\n        this.editor.setOptions({});\n      }\n    }\n  },\n  beforeDestroy() {\n    this.editor.unregisterPlugin(\"floating_menu\");\n  },\n  methods: {\n    onClickImage() {\n      this.addImageAt = this.editor.view.state.tr.selection.head;\n      this.$refs.imageInput.click();\n      this.hideFloatingMenu();\n    },\n    onClickAudio() {\n      this.addAudioAt = this.editor.view.state.tr.selection.head;\n      this.$refs.audioInput.click();\n      this.hideFloatingMenu();\n    },\n    previewFiles(command) {\n      const { imageInput } = this.$refs;\n      const imageFile = imageInput.files[0];\n\n      if (imageFile && !this.beforeUpload(imageFile, \"image\")) {\n        imageInput.value = \"\";\n        return;\n      }\n\n      if (imageFile) {\n        const reader = new FileReader();\n        reader.onload = () => {\n          const img = new Image();\n          img.src = reader.result;\n          command({\n            src: { fallback: img.src },\n            addImageAt: this.addImageAt\n          });\n        };\n        reader.readAsDataURL(imageFile);\n      }\n    },\n    previewAudio(command) {\n      const { audioInput } = this.$refs;\n      const audioFile = audioInput.files[0];\n\n      if (audioFile && !this.beforeUpload(audioFile, \"audio\")) {\n        audioInput.value = \"\";\n        return;\n      }\n\n      if (audioFile) {\n        const reader = new FileReader();\n        reader.onload = () => {\n          command({\n            src: reader.result,\n            addAudioAt: this.addAudioAt\n          });\n        };\n        reader.readAsDataURL(audioFile);\n      }\n    },\n    toggleMenu(e) {\n      if (!this.shouldShowMenu) {\n        const nodePos = this.editor.view.posAtCoords({\n          left: e.clientX + 100,\n          top: e.clientY\n        });\n        this.editor.setSelection(nodePos.pos, nodePos.pos);\n      }\n      this.shouldShowMenu = !this.shouldShowMenu;\n      this.editor.setOptions({});\n    },\n    onClickEmbed(command, type) {\n      command({ type });\n      this.hideFloatingMenu();\n    },\n    onClickMenuItem(command) {\n      command();\n      this.hideFloatingMenu();\n    },\n    hideFloatingMenu() {\n      this.shouldShowMenu = false;\n    }\n  }\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorFloatingMenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorFloatingMenu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EditorFloatingMenu.vue?vue&type=template&id=d0698000&\"\nimport script from \"./EditorFloatingMenu.vue?vue&type=script&lang=js&\"\nexport * from \"./EditorFloatingMenu.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(!_vm.isInputActive)?_c('ul',{ref:\"menuUl\",staticClass:\"highlight-menu\",class:{\n      'is-active': _vm.menu.isActive && !_vm.isTitleSelected(),\n      ios: _vm.ios\n    },style:(_vm.getStyle(_vm.menu))},[_c('li',{on:{\"click\":_vm.commands.bold}},[_c('button',[_c('i',{staticClass:\"bold-icon\",class:{ 'is-active': _vm.isActive.bold() }})])]),_c('li',{on:{\"click\":_vm.commands.italic}},[_c('button',[_c('i',{staticClass:\"italic-icon\",class:{ 'is-active': _vm.isActive.italic() }})])]),_c('li',{on:{\"click\":function($event){_vm.showInput(_vm.getMarkAttrs('link'))}}},[_c('button',[_c('i',{staticClass:\"link-icon\",class:{ 'is-active': _vm.isActive.link() }})])]),_vm._m(0),_c('li',{on:{\"click\":function($event){return _vm.commands.heading({ level: 3 })}}},[_c('button',[_c('i',{staticClass:\"large-heading-icon\",class:{ 'is-active': _vm.isActive.heading({ level: 3 }) }})])]),_c('li',{on:{\"click\":function($event){return _vm.commands.heading({ level: 5 })}}},[_c('button',[_c('i',{staticClass:\"small-heading-icon\",class:{ 'is-active': _vm.isActive.heading({ level: 5 }) }})])]),_c('li',{on:{\"click\":_vm.commands.blockquote}},[_c('button',[_c('i',{staticClass:\"quote-icon\",class:{ 'is-active': _vm.isActive.blockquote() }})])])]):_c('div',{ref:\"linkDiv\",class:['highlight-menu-input', _vm.ios ? 'ios' : ''],style:(_vm.getStyle(_vm.menu))},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.href),expression:\"href\"}],attrs:{\"type\":\"text\",\"placeholder\":\"Paste or type a link\"},domProps:{\"value\":(_vm.href)},on:{\"keydown\":[function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }$event.preventDefault();return _vm.addAnchor(_vm.editor.commands.link, _vm.href)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"esc\",27,$event.key,[\"Esc\",\"Escape\"])){ return null; }return _vm.hideInput($event)}],\"input\":function($event){if($event.target.composing){ return; }_vm.href=$event.target.value}}}),_c('i',{staticClass:\"toolbar-close-icon\",on:{\"click\":function($event){return _vm.addAnchor(_vm.editor.commands.link, _vm.href)}}})])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('li',[_c('button',[_c('i',{staticClass:\"separator-icon\"})])])}]\n\nexport { render, staticRenderFns }","const result = {};\nexport default result;\n\nif (typeof navigator != \"undefined\" && typeof document != \"undefined\") {\n  const ie_edge = /Edge\\/(\\d+)/.exec(navigator.userAgent);\n  const ie_upto10 = /MSIE \\d/.test(navigator.userAgent);\n  const ie_11up = /Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(\n    navigator.userAgent\n  );\n\n  result.mac = /Mac/.test(navigator.platform);\n  let ie = (result.ie = !!(ie_upto10 || ie_11up || ie_edge));\n  result.ie_version = ie_upto10\n    ? document.documentMode || 6\n    : ie_11up\n    ? +ie_11up[1]\n    : ie_edge\n    ? +ie_edge[1]\n    : null;\n  result.gecko = !ie && /gecko\\/(\\d+)/i.test(navigator.userAgent);\n  result.gecko_version =\n    result.gecko && +(/Firefox\\/(\\d+)/.exec(navigator.userAgent) || [0, 0])[1];\n  let chrome = !ie && /Chrome\\/(\\d+)/.exec(navigator.userAgent);\n  result.chrome = !!chrome;\n  result.chrome_version = chrome && +chrome[1];\n  result.ios =\n    !ie &&\n    /AppleWebKit/.test(navigator.userAgent) &&\n    /Mobile\\/\\w+/.test(navigator.userAgent);\n  result.android = /Android \\d/.test(navigator.userAgent);\n  result.webkit = \"webkitFontSmoothing\" in document.documentElement.style;\n  result.safari = /Apple Computer/.test(navigator.vendor);\n  result.webkit_version =\n    result.webkit &&\n    +(/\\bAppleWebKit\\/(\\d+)/.exec(navigator.userAgent) || [0, 0])[1];\n}\n","import { Plugin, PluginKey } from \"tiptap\";\n\nfunction textRange(node, from, to) {\n  const range = document.createRange();\n  range.setEnd(node, to == null ? node.nodeValue.length : to);\n  range.setStart(node, from || 0);\n  return range;\n}\n\nfunction singleRect(object, bias) {\n  const rects = object.getClientRects();\n  return !rects.length\n    ? object.getBoundingClientRect()\n    : rects[bias < 0 ? 0 : rects.length - 1];\n}\n\nfunction coordsAtPos(view, pos, end = false) {\n  const { node, offset } = view.docView.domFromPos(pos);\n  let side;\n  let rect;\n  if (node.nodeType === 3) {\n    if (end && offset < node.nodeValue.length) {\n      rect = singleRect(textRange(node, offset - 1, offset), -1);\n      side = \"right\";\n    } else if (offset < node.nodeValue.length) {\n      rect = singleRect(textRange(node, offset, offset + 1), -1);\n      side = \"left\";\n    }\n  } else if (node.firstChild) {\n    if (offset < node.childNodes.length) {\n      const child = node.childNodes[offset];\n      rect = singleRect(child.nodeType === 3 ? textRange(child) : child, -1);\n      side = \"left\";\n    }\n    if ((!rect || rect.top === rect.bottom) && offset) {\n      const child = node.childNodes[offset - 1];\n      rect = singleRect(child.nodeType === 3 ? textRange(child) : child, 1);\n      side = \"right\";\n    }\n  } else {\n    rect = node.getBoundingClientRect();\n    side = \"left\";\n  }\n\n  const x = rect[side];\n\n  return {\n    top: rect.top,\n    bottom: rect.bottom,\n    left: x,\n    right: x\n  };\n}\n\nclass Menu {\n  constructor({ options, editorView }) {\n    this.options = {\n      ...{\n        element: null,\n        keepInBounds: true,\n        onUpdate: () => false\n      },\n      ...options\n    };\n    this.editorView = editorView;\n    this.isActive = false;\n    this.left = 0;\n    this.bottom = 0;\n    this.top = 0;\n    this.preventHide = false;\n\n    // the mousedown event is fired before blur so we can prevent it\n    this.mousedownHandler = this.handleClick.bind(this);\n    this.options.element.addEventListener(\"mousedown\", this.mousedownHandler, {\n      capture: true\n    });\n\n    this.focusHandler = ({ view }) => {\n      this.update(view);\n    };\n    this.options.editor.on(\"focus\", this.focusHandler);\n\n    this.blurHandler = ({ event }) => {\n      if (this.preventHide) {\n        this.preventHide = false;\n        return;\n      }\n\n      this.hide(event);\n    };\n    this.options.editor.on(\"blur\", this.blurHandler);\n  }\n\n  handleClick() {\n    this.preventHide = true;\n  }\n\n  update(view, lastState) {\n    const { state } = view;\n\n    if (view.composing) {\n      return;\n    }\n\n    // Don't do anything if the document/selection didn't change\n    if (\n      lastState &&\n      lastState.doc.eq(state.doc) &&\n      lastState.selection.eq(state.selection)\n    ) {\n      return;\n    }\n\n    // Hide the tooltip if the selection is empty\n    if (state.selection.empty) {\n      this.hide();\n      return;\n    }\n\n    // Otherwise, reposition it and update its content\n    const { from, to } = state.selection;\n\n    // These are in screen coordinates\n    // We can't use EditorView.cordsAtPos here because it can't handle linebreaks correctly\n    // See: https://github.com/ProseMirror/prosemirror-view/pull/47\n    const start = coordsAtPos(view, from);\n    const end = coordsAtPos(view, to, true);\n\n    // The box in which the tooltip is positioned, to use as base\n    const parent = this.options.element.offsetParent;\n\n    if (parent) {\n      const box = parent.getBoundingClientRect();\n      const el = this.options.element.firstElementChild.getBoundingClientRect();\n\n      // Find a center-ish x position from the selection endpoints (when\n      // crossing lines, end may be more to the left)\n      const left = (start.left + end.left) / 2 - box.left;\n\n      // Keep the menuBubble in the bounding box of the offsetParent i\n      this.left =\n        Math.round(\n          this.options.keepInBounds\n            ? Math.min(box.width - el.width / 2, Math.max(left, el.width / 2))\n            : left\n        ) - Math.round(el.width / 2);\n      this.bottom = Math.round(box.bottom - start.top);\n      this.top = Math.round(end.bottom - box.top);\n    }\n\n    this.isActive = true;\n\n    this.sendUpdate();\n  }\n\n  sendUpdate() {\n    this.options.onUpdate({\n      isActive: this.isActive,\n      left: this.left,\n      bottom: this.bottom,\n      top: this.top\n    });\n  }\n\n  hide(event) {\n    if (\n      event &&\n      event.relatedTarget &&\n      this.options.element.parentNode &&\n      this.options.element.parentNode.contains(event.relatedTarget)\n    ) {\n      return;\n    }\n\n    this.isActive = false;\n    this.sendUpdate();\n  }\n\n  destroy() {\n    this.options.element.removeEventListener(\n      \"mousedown\",\n      this.mousedownHandler\n    );\n    this.options.editor.off(\"focus\", this.focusHandler);\n    this.options.editor.off(\"blur\", this.blurHandler);\n  }\n}\n\nexport default function(options) {\n  return new Plugin({\n    key: new PluginKey(\"menu_bubble\"),\n    view(editorView) {\n      return new Menu({ editorView, options });\n    }\n  });\n}\n","export const isDataURL = data => {\n  const regex = new RegExp(\n    /^\\s*data:([a-z]+\\/[a-z]+(;[a-z\\-]+\\=[a-z\\-]+)?)?(;base64)?,[a-z0-9\\!\\$\\&\\'\\,\\(\\)\\*\\+\\,\\;\\=\\-\\.\\_\\~\\:\\@\\/\\?\\%\\s]*\\s*$/i // eslint-disable-line\n  );\n  return !!data.match(regex);\n};\n\n// https://stackoverflow.com/questions/11300906/check-if-a-string-starts-with-http-using-javascript\nexport const getValidUrl = (url = \"\") => {\n  let newUrl = window.decodeURIComponent(url);\n  newUrl = newUrl.trim().replace(/\\s/g, \"\");\n\n  if (/^(:\\/\\/)/.test(newUrl)) {\n    return `https${newUrl}`;\n  }\n  if (!/^(f|ht)tps?:\\/\\//i.test(newUrl)) {\n    return `https://${newUrl}`;\n  }\n  return newUrl;\n};\n","<template>\n  <div>\n    <ul\n      v-if=\"!isInputActive\"\n      class=\"highlight-menu\"\n      :class=\"{\n        'is-active': menu.isActive && !isTitleSelected(),\n        ios\n      }\"\n      :style=\"getStyle(menu)\"\n      ref=\"menuUl\"\n    >\n      <li @click=\"commands.bold\">\n        <button>\n          <i class=\"bold-icon\" :class=\"{ 'is-active': isActive.bold() }\"></i>\n        </button>\n      </li>\n\n      <li @click=\"commands.italic\">\n        <button>\n          <i\n            class=\"italic-icon\"\n            :class=\"{ 'is-active': isActive.italic() }\"\n          ></i>\n        </button>\n      </li>\n      <li @click=\"showInput(getMarkAttrs('link'))\">\n        <button>\n          <i class=\"link-icon\" :class=\"{ 'is-active': isActive.link() }\"></i>\n        </button>\n      </li>\n\n      <li>\n        <button>\n          <i class=\"separator-icon\"></i>\n        </button>\n      </li>\n\n      <li @click=\"commands.heading({ level: 3 })\">\n        <button>\n          <i\n            class=\"large-heading-icon\"\n            :class=\"{ 'is-active': isActive.heading({ level: 3 }) }\"\n          ></i>\n        </button>\n      </li>\n\n      <li @click=\"commands.heading({ level: 5 })\">\n        <button>\n          <i\n            class=\"small-heading-icon\"\n            :class=\"{ 'is-active': isActive.heading({ level: 5 }) }\"\n          ></i>\n        </button>\n      </li>\n\n      <li @click=\"commands.blockquote\">\n        <button>\n          <i\n            class=\"quote-icon\"\n            :class=\"{ 'is-active': isActive.blockquote() }\"\n          ></i>\n        </button>\n      </li>\n    </ul>\n    <div\n      v-else\n      ref=\"linkDiv\"\n      :class=\"['highlight-menu-input', ios ? 'ios' : '']\"\n      :style=\"getStyle(menu)\"\n    >\n      <input\n        type=\"text\"\n        v-model=\"href\"\n        placeholder=\"Paste or type a link\"\n        @keydown.enter.prevent=\"addAnchor(editor.commands.link, href)\"\n        @keydown.esc=\"hideInput\"\n      />\n      <i\n        class=\"toolbar-close-icon\"\n        @click=\"addAnchor(editor.commands.link, href)\"\n      ></i>\n    </div>\n  </div>\n</template>\n\n<script>\nimport browser from \"../utils/browser\";\nimport MenuBubble from \"./../extensions/MenuBubble\";\nimport { getValidUrl } from \"./../utils\";\n\nexport default {\n  props: {\n    editor: {\n      default: null,\n      type: Object\n    }\n  },\n  data() {\n    return {\n      href: null,\n      isInputActive: false,\n      ios: browser.ios,\n      menu: {\n        isActive: false,\n        left: 0,\n        bottom: 0\n      }\n    };\n  },\n  computed: {\n    focused() {\n      return this.editor.view.focused;\n    },\n    focus() {\n      return this.editor.focus;\n    },\n    commands() {\n      return this.editor.commands;\n    },\n    isActive() {\n      return this.editor.isActive;\n    },\n    getMarkAttrs() {\n      return this.editor.getMarkAttrs.bind(this.editor);\n    },\n    getNodeAttrs() {\n      return (\n        this.editor.getNodeAttrs && this.editor.getNodeAttrs.bind(this.editor)\n      );\n    }\n  },\n  watch: {\n    editor: {\n      immediate: true,\n      handler(editor) {\n        if (editor) {\n          this.$nextTick(() => {\n            editor.registerPlugin(\n              MenuBubble({\n                editor,\n                element: this.$el,\n                keepInBounds: true,\n                onUpdate: menu => {\n                  // the second check ensures event is fired only once\n                  if (menu.isActive && this.menu.isActive === false) {\n                    if (this.ios) {\n                      this.fixMenuEl();\n                    }\n                    this.$emit(\"show\", menu);\n                  } else if (!menu.isActive && this.menu.isActive === true) {\n                    this.$emit(\"hide\", menu);\n                  }\n                  this.menu = menu;\n                }\n              })\n            );\n          });\n        }\n      }\n    },\n    \"menu.isActive\"(newValue) {\n      if (!newValue) this.isInputActive = false;\n    }\n  },\n  mounted() {\n    if (this.ios) {\n      window.addEventListener(\"scroll\", this.fixMenuEl);\n      window.addEventListener(\"resize\", this.fixMenuEl);\n      window.visualViewport.addEventListener(\"scroll\", this.fixMenuEl);\n      window.visualViewport.addEventListener(\"resize\", this.fixMenuEl);\n    }\n  },\n  beforeDestroy() {\n    if (this.ios) {\n      window.removeEventListener(\"scroll\", this.fixMenuEl);\n      window.removeEventListener(\"resize\", this.fixMenuEl);\n      window.visualViewport.removeEventListener(\"scroll\", this.fixMenuEl);\n      window.visualViewport.removeEventListener(\"resize\", this.fixMenuEl);\n    }\n    this.editor.unregisterPlugin(\"menu_bubble\");\n  },\n  methods: {\n    getStyle(menu) {\n      return window.screen.width >= 786\n        ? `left: ${menu.left}px; bottom: ${menu.bottom}px;`\n        : \"\";\n    },\n    showInput(attrs) {\n      this.href = attrs.href;\n      this.isInputActive = true;\n      this.$nextTick(() => {\n        if (this.ios) this.fixMenuEl();\n        this.$refs.linkDiv.querySelector(\"input\").focus();\n      });\n    },\n    addAnchor(command, url) {\n      let validUrl;\n      if (url) validUrl = getValidUrl(url);\n      command({ href: validUrl });\n      this.hideInput();\n      this.menu.isActive = true;\n    },\n    hideInput() {\n      this.href = null;\n      this.isInputActive = false;\n      this.$nextTick(() => {\n        if (this.ios) this.fixMenuEl();\n      });\n    },\n    isTitleSelected() {\n      const { $from, $to } = this.editor.view.state.tr.selection;\n      return (\n        $from.parent.type.name === \"title\" && $to.parent.type.name === \"title\"\n      );\n    },\n    fixMenuEl() {\n      const menuUl = this.$refs.menuUl;\n      const linkDiv = this.$refs.linkDiv;\n      const pageTop = window.visualViewport.pageTop;\n      const article = document.getElementsByClassName(\"editor\")[0];\n\n      if (linkDiv) linkDiv.style.top = `${pageTop - article.offsetTop}px`;\n      if (menuUl) menuUl.style.top = `${pageTop - article.offsetTop}px`;\n    }\n  }\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorMenuBubble.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorMenuBubble.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EditorMenuBubble.vue?vue&type=template&id=2f42ac47&\"\nimport script from \"./EditorMenuBubble.vue?vue&type=script&lang=js&\"\nexport * from \"./EditorMenuBubble.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { Doc } from \"tiptap\";\n\nexport default class CustomDoc extends Doc {\n  get schema() {\n    return {\n      content: \"header featuredimage block+\"\n    };\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(!_vm.embeds.data.url)?_c('ul',{staticClass:\"kitchensink embed-input-open\"},[_c('li',{on:{\"click\":_vm.deleteNode}},[_c('i',{staticClass:\"add-icon close-icon\"})]),(_vm.embeds.isLoading === true)?_c('li',{staticClass:\"embed-input\"},[_c('i',{staticClass:\"loading-icon\"}),_c('span',[_vm._v(_vm._s(_vm.loadingText))])]):_vm._e(),(_vm.embeds.isLoading === false)?_c('li',{staticClass:\"embed-input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.url),expression:\"url\"}],ref:\"embedInput\",attrs:{\"placeholder\":_vm.placeholderText,\"type\":\"url\",\"disabled\":!_vm.view.editable},domProps:{\"value\":(_vm.url)},on:{\"paste\":function($event){$event.stopPropagation();},\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.onClickAdd($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.url=$event.target.value}}}),_c('button',{class:{ active: _vm.isButtonActive },attrs:{\"disabled\":!_vm.isButtonActive},on:{\"click\":_vm.onClickAdd}},[_vm._v(\" Add \")])]):_vm._e()]):_vm._e(),(_vm.embeds.data.url && _vm.embeds.data.type === 'video')?_c('div',{class:['embed-wrapper', _vm.embedWrapperClass]},[_c('figure',{domProps:{\"innerHTML\":_vm._s(_vm.embeds.data.html)}}),(_vm.embeds.data.url && _vm.embeds.data.type === 'video')?_c('figcaption',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.caption),expression:\"caption\"}],attrs:{\"type\":\"text\",\"disabled\":!_vm.view.editable,\"placeholder\":\"Type caption for video (optional)\"},domProps:{\"value\":(_vm.caption)},on:{\"keydown\":_vm.handleKeydown,\"paste\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.caption=$event.target.value}}})]):_vm._e()]):_vm._e(),(_vm.embeds.data.url && _vm.embeds.data.type === 'link')?_c('div',{class:[\n      'embed-wrapper',\n      { selected: _vm.shouldShowClose },\n      _vm.embedWrapperClass\n    ],on:{\"click\":_vm.onClickEmbed}},[_c('div',{staticClass:\"close-button\",on:{\"click\":_vm.deleteNode}},[_c('i',{staticClass:\"close-icon\"})]),_c('div',{class:{\n        'embed-content':\n          _vm.embeds.data.provider === 'Twitter' ||\n          _vm.embeds.data.provider === 'Instagram'\n      },domProps:{\"innerHTML\":_vm._s(_vm.embeds.data.html)}})]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <ul v-if=\"!embeds.data.url\" class=\"kitchensink embed-input-open\">\n      <li @click=\"deleteNode\">\n        <i class=\"add-icon close-icon\"></i>\n      </li>\n      <li class=\"embed-input\" v-if=\"embeds.isLoading === true\">\n        <i class=\"loading-icon\"></i>\n        <span>{{ loadingText }}</span>\n      </li>\n      <li v-if=\"embeds.isLoading === false\" class=\"embed-input\">\n        <input\n          ref=\"embedInput\"\n          :placeholder=\"placeholderText\"\n          type=\"url\"\n          @paste.stop\n          @keyup.enter=\"onClickAdd\"\n          v-model=\"url\"\n          :disabled=\"!view.editable\"\n        />\n        <button\n          :disabled=\"!isButtonActive\"\n          :class=\"{ active: isButtonActive }\"\n          @click=\"onClickAdd\"\n        >\n          Add\n        </button>\n      </li>\n    </ul>\n    <div\n      v-if=\"embeds.data.url && embeds.data.type === 'video'\"\n      :class=\"['embed-wrapper', embedWrapperClass]\"\n    >\n      <figure v-html=\"embeds.data.html\"></figure>\n      <figcaption v-if=\"embeds.data.url && embeds.data.type === 'video'\">\n        <input\n          type=\"text\"\n          v-model=\"caption\"\n          :disabled=\"!view.editable\"\n          @keydown=\"handleKeydown\"\n          @paste.stop\n          placeholder=\"Type caption for video (optional)\"\n        />\n      </figcaption>\n    </div>\n    <div\n      @click=\"onClickEmbed\"\n      v-if=\"embeds.data.url && embeds.data.type === 'link'\"\n      :class=\"[\n        'embed-wrapper',\n        { selected: shouldShowClose },\n        embedWrapperClass\n      ]\"\n    >\n      <div class=\"close-button\" @click=\"deleteNode\">\n        <i class=\"close-icon\"></i>\n      </div>\n      <div\n        :class=\"{\n          'embed-content':\n            embeds.data.provider === 'Twitter' ||\n            embeds.data.provider === 'Instagram'\n        }\"\n        v-html=\"embeds.data.html\"\n      ></div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { TextSelection } from \"tiptap\";\n\nimport { getValidUrl } from \"./../../../utils\";\n\nexport default {\n  name: \"Embed\",\n  props: [\"node\", \"updateAttrs\", \"view\", \"getPos\", \"options\", \"editor\"],\n  data() {\n    return {\n      isButtonActive: false,\n      shouldShowClose: false,\n      embeds: {\n        isLoading: false,\n        isError: false,\n        data: {\n          title: \"\",\n          description: \"\",\n          type: \"\",\n          url: \"\",\n          thumbnail_url: \"\",\n          thumbnail_width: 0,\n          thumbnail_height: 0,\n          provider: \"\",\n          html: \"\",\n          caption: \"\"\n        }\n      }\n    };\n  },\n  inject: [\"getEditorVm\"],\n  mounted() {\n    this.getEditorVm().$watch(\"selectedEl\", value => {\n      if (this.shouldShowClose && value !== this.$el)\n        this.shouldShowClose = false;\n    });\n    if (this.url) {\n      const data = {\n        title: this.node.attrs.title,\n        url: this.node.attrs.url,\n        thumbnail_url: this.node.attrs.thumbnail_url,\n        thumbnail_width: this.node.attrs.thumbnail_width,\n        thumbnail_height: this.node.attrs.thumbnail_height,\n        provider: this.node.attrs.provider,\n        type: this.node.attrs.type,\n        description: this.node.attrs.description,\n        html: this.node.attrs.html\n      };\n      this.embeds.data = data;\n\n      if (this.embeds.data.type === \"link\") {\n        this.$nextTick(() => {\n          this.disableLink();\n          this.loadEmbeds();\n        });\n      }\n    } else {\n      this.$nextTick(() => {\n        this.$refs.embedInput.focus();\n      });\n    }\n  },\n  watch: {\n    url() {\n      if (this.url) {\n        this.isButtonActive = true;\n      } else {\n        this.isButtonActive = false;\n      }\n    }\n  },\n  computed: {\n    url: {\n      get() {\n        return this.node.attrs.url;\n      },\n      set(url) {\n        this.updateAttrs({\n          url\n        });\n      }\n    },\n    caption: {\n      get() {\n        return this.node.attrs.caption;\n      },\n      set(caption) {\n        this.updateAttrs({\n          caption\n        });\n      }\n    },\n    placeholderText() {\n      if (this.node.attrs.type === \"link\") {\n        return \"Paste or type a link\";\n      }\n      return \"Paste or type video link\";\n    },\n    loadingText() {\n      if (this.node.attrs.type === \"link\") return \"Embedding link…\";\n      return \"Embedding video…\";\n    },\n    embedWrapperClass() {\n      if (this.node.attrs.provider) {\n        return `${this.node.attrs.provider.toLowerCase()}-wrapper`;\n      } else {\n        return `standard-link-wrapper`;\n      }\n    }\n  },\n  methods: {\n    loadScript(url, callback) {\n      var script = document.createElement(\"script\");\n      script.type = \"text/javascript\";\n      if (script.readyState) {\n        // only required for IE <9\n        script.onreadystatechange = () => {\n          if (\n            script.readyState === \"loaded\" ||\n            script.readyState === \"complete\"\n          ) {\n            script.onreadystatechange = null;\n            callback();\n          }\n        };\n      } else {\n        //Others\n        script.onload = () => {\n          callback();\n        };\n      }\n\n      script.src = url;\n      document.getElementsByTagName(\"head\")[0].appendChild(script);\n    },\n    loadEmbeds() {\n      if (this.embeds.data.provider === \"Twitter\") {\n        if (window.twttr) window.twttr.widgets.load();\n        else {\n          this.loadScript(\"https://platform.twitter.com/widgets.js\", () => {\n            window.twttr.widgets.load();\n          });\n        }\n      }\n\n      if (this.embeds.data.provider === \"Instagram\") {\n        if (window.instgrm) window.instgrm.Embeds.process();\n        else {\n          this.loadScript(\"https://www.instagram.com/embed.js\", () => {\n            window.instgrm.Embeds.process();\n          });\n        }\n      }\n    },\n    async onClickAdd() {\n      if (!this.url) return;\n\n      // move cursor to new paragraph\n      let tr = this.view.state.tr;\n      const pos = this.getPos();\n      let textSelection = TextSelection.create(tr.doc, pos + 1, pos + 1);\n      tr = tr.setSelection(textSelection);\n      this.view.dispatch(tr);\n\n      const validURL = getValidUrl(this.url);\n      this.updateAttrs({\n        url: validURL\n      });\n\n      this.embeds.isLoading = true;\n      this.embeds.isError = false;\n      try {\n        const url = encodeURIComponent(validURL.trim());\n        const response = await this.options.getEmbeds(url);\n        // TODO: refactor here and similar code in mounted hook\n        this.embeds.data = {\n          title: response.data.attrs.title,\n          description: response.data.attrs.description,\n          url: response.data.attrs.url,\n          provider: response.data.attrs.provider,\n          thumbnail_url: response.data.attrs.thumbnail_url,\n          thumbnail_width: response.data.attrs.thumbnail_width,\n          thumbnail_height: response.data.attrs.thumbnail_height,\n          html: response.data.attrs.html,\n          type: response.data.attrs.type\n        };\n        // for copy pasting to work\n        this.updateAttrs(this.embeds.data);\n\n        if (this.embeds.data.type === \"link\") {\n          this.$nextTick(() => {\n            this.disableLink();\n            this.loadEmbeds();\n          });\n        }\n      } catch (error) {\n        this.embeds.isError = true;\n      } finally {\n        this.embeds.isLoading = false;\n      }\n    },\n    createAndMovetoNextParagraph() {\n      let {\n        state: { tr, schema }\n      } = this.view;\n      const pos = this.getPos();\n      // replce embeds with paragraph\n      let textSelection = TextSelection.create(tr.doc, pos, pos + 1);\n      tr = tr.setSelection(textSelection).insertText(this.url);\n\n      // create new paragraph\n      const type = schema.nodes[\"paragraph\"];\n      tr = tr.insert(pos + this.url.length + 2, type.create());\n      // move cursor to new paragraph\n      textSelection = TextSelection.create(\n        tr.doc,\n        pos + this.url.length + 2,\n        pos + this.url.length + 2\n      );\n      tr = tr.setSelection(textSelection);\n      this.view.dispatch(tr);\n      // focus the editor\n      this.view.focus();\n    },\n    validURL(str) {\n      var pattern = new RegExp(\n        \"^(https?:\\\\/\\\\/)?\" + // protocol\n        \"((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|\" + // domain name\n        \"((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))\" + // OR ip (v4) address\n        \"(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*\" + // port and path\n        \"(\\\\?[;&a-z\\\\d%_.~+=-]*)?\" + // query string\n          \"(\\\\#[-a-z\\\\d_]*)?$\",\n        \"i\"\n      ); // fragment locator\n      return !!pattern.test(str);\n    },\n    handleKeydown(event) {\n      let {\n        state: { tr }\n      } = this.view;\n      const pos = this.getPos();\n      if (event.key === \"Backspace\" && !this.caption) {\n        let textSelection = TextSelection.create(tr.doc, pos, pos + 1);\n        this.view.dispatch(\n          tr.setSelection(textSelection).deleteSelection(this.url)\n        );\n        this.view.focus();\n      } else if (event.key === \"Enter\") {\n        let textSelection = TextSelection.create(tr.doc, pos + 2, pos + 2);\n        this.view.dispatch(tr.setSelection(textSelection));\n        this.view.focus();\n        event.preventDefault();\n      }\n    },\n    disableLink() {\n      this.$el.querySelector(\"a\").onclick = e => e.preventDefault();\n    },\n    onClickEmbed() {\n      this.editor.blur();\n      this.shouldShowClose = !this.shouldShowClose;\n      this.options.onSelection(this.shouldShowClose ? this.$el : \"\");\n    },\n    deleteNode() {\n      let {\n        state: { tr }\n      } = this.view;\n      const pos = this.getPos();\n      let textSelection = TextSelection.create(tr.doc, pos, pos + 1);\n      this.view.dispatch(\n        tr.setSelection(textSelection).deleteSelection(this.src)\n      );\n      this.view.focus();\n    }\n  }\n};\n</script>\n\n<style scoped>\n.video-wrapper iframe {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Embed.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Embed.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Embed.vue?vue&type=template&id=151a5591&scoped=true&\"\nimport script from \"./Embed.vue?vue&type=script&lang=js&\"\nexport * from \"./Embed.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Embed.vue?vue&type=style&index=0&id=151a5591&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"151a5591\",\n  null\n  \n)\n\nexport default component.exports","import { Node } from \"tiptap\";\n\nimport Embed from \"./Embed.vue\";\n\nexport default class EmbedNode extends Node {\n  get name() {\n    return \"embed\";\n  }\n\n  get schema() {\n    return {\n      attrs: {\n        title: {\n          default: \"\"\n        },\n        description: {\n          default: \"\"\n        },\n        type: {\n          default: \"\"\n        },\n        url: {\n          default: \"\"\n        },\n        provider: {\n          default: \"\"\n        },\n        thumbnail_url: {\n          default: \"\"\n        },\n        thumbnail_width: {\n          default: \"\"\n        },\n        thumbnail_height: {\n          default: \"\"\n        },\n        html: {\n          default: \"\"\n        },\n        caption: {\n          default: null\n        }\n      },\n      group: \"block\",\n      selectable: false,\n      // parseDOM and toDOM is still required to make copy and paste work\n      parseDOM: [\n        {\n          tag: this.name,\n          getAttrs: dom => {\n            return {\n              title: dom.getAttribute(\"title\"),\n              description: dom.getAttribute(\"description\"),\n              type: dom.getAttribute(\"type\"),\n              url: dom.getAttribute(\"url\"),\n              provider: dom.getAttribute(\"provider\"),\n              thumbnail_url: dom.getAttribute(\"thumbnail_url\"),\n              thumbnail_width: dom.getAttribute(\"thumbnail_width\"),\n              thumbnail_height: dom.getAttribute(\"thumbnail_height\"),\n              caption: dom.getAttribute(\"caption\"),\n              html: dom.getAttribute(\"html\")\n            };\n          }\n        }\n      ],\n      toDOM: node => [\"embed\", node.attrs]\n    };\n  }\n\n  commands({ type }) {\n    return attrs => (state, dispatch) => {\n      return dispatch(state.tr.replaceSelectionWith(type.create(attrs)));\n    };\n  }\n\n  get view() {\n    return {\n      props: [\"node\", \"updateAttrs\", \"view\", \"getPos\", \"options\", \"editor\"],\n      components: {\n        Embed\n      },\n      template: `\n        <Embed\n          :node='this.node'\n          :updateAttrs='this.updateAttrs'\n          :view='this.view'\n          :getPos='this.getPos'\n          :options='this.options'\n          :editor='this.editor'\n        ></Embed>\n      `\n    };\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('figure',{class:{ selected: _vm.shouldShowClose }},[_c('div',{staticClass:\"close-button\",on:{\"click\":_vm.deleteNode}},[_c('i',{staticClass:\"close-icon\"})]),_c('picture',{on:{\"click\":_vm.onImageClick}},[(_vm.data.image)?_c('source',{attrs:{\"srcset\":_vm.data.image,\"type\":\"image\"}}):_vm._e(),_c('source',{attrs:{\"srcset\":_vm.data.fallback,\"type\":\"image\"}}),_c('img',{attrs:{\"src\":_vm.data.fallback},on:{\"load\":_vm.loaded}})]),_c('figcaption',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.caption),expression:\"caption\"}],attrs:{\"placeholder\":\"Type caption for image (optional)\"},domProps:{\"value\":(_vm.caption)},on:{\"keydown\":_vm.handleKeydown,\"paste\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.caption=$event.target.value}}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <figure :class=\"{ selected: shouldShowClose }\">\n    <div class=\"close-button\" @click=\"deleteNode\">\n      <i class=\"close-icon\"></i>\n    </div>\n    <picture @click=\"onImageClick\">\n      <source v-if=\"data.image\" :srcset=\"data.image\" type=\"image\" />\n      <source :srcset=\"data.fallback\" type=\"image\" />\n      <img :src=\"data.fallback\" @load=\"loaded\" />\n    </picture>\n    <figcaption>\n      <input\n        v-model=\"caption\"\n        placeholder=\"Type caption for image (optional)\"\n        @keydown=\"handleKeydown\"\n        @paste.stop\n      />\n    </figcaption>\n  </figure>\n</template>\n\n<script>\nimport { TextSelection } from \"tiptap\";\nimport { isDataURL } from \"./../../../utils\";\n\nexport default {\n  name: \"ImageBlock\",\n  props: [\"node\", \"updateAttrs\", \"view\", \"getPos\", \"options\"],\n  data() {\n    return {\n      height: \"\",\n      width: \"\",\n      data: this.node.attrs.src,\n      shouldShowClose: false\n    };\n  },\n  inject: [\"getEditorVm\"],\n  computed: {\n    src: {\n      get() {\n        return this.node.attrs.src;\n      },\n      set(src) {\n        this.updateAttrs({\n          src\n        });\n      }\n    },\n    caption: {\n      get() {\n        return this.node.attrs.caption;\n      },\n      set(caption) {\n        this.updateAttrs({\n          caption\n        });\n      }\n    }\n  },\n  mounted() {\n    this.$nextTick(() => {\n      this.view.focus();\n      this.$el.scrollIntoView(true);\n    });\n    this.getEditorVm().$watch(\"selectedEl\", value => {\n      if (this.shouldShowClose && value !== this.$el)\n        this.shouldShowClose = false;\n    });\n  },\n  methods: {\n    handleKeydown(event) {\n      let {\n        state: { tr }\n      } = this.view;\n      const pos = this.getPos();\n      if (event.key === \"Enter\") {\n        let textSelection = TextSelection.create(tr.doc, pos + 2, pos + 2);\n        this.view.dispatch(tr.setSelection(textSelection));\n        this.view.focus();\n        event.preventDefault();\n      }\n    },\n    deleteNode() {\n      let {\n        state: { tr }\n      } = this.view;\n      const pos = this.getPos();\n      let textSelection = TextSelection.create(tr.doc, pos, pos + 1);\n      this.view.dispatch(\n        tr.setSelection(textSelection).deleteSelection(this.src)\n      );\n      this.view.focus();\n    },\n    onImageClick() {\n      if (isDataURL(this.data && this.data.fallback) === false)\n        this.shouldShowClose = !this.shouldShowClose;\n      this.options.onSelection(this.shouldShowClose ? this.$el : \"\");\n    },\n    async loaded() {\n      const imageInputEl = document.getElementById(\"image-input\");\n\n      if (\n        this.data.fallback.includes(\"data:\") &&\n        imageInputEl.files.length != 0\n      ) {\n        const file = this.src.file || imageInputEl.files[0];\n        const formData = new FormData();\n        formData.append(\"image\", file);\n\n        try {\n          const response = await this.options.uploadImage(formData);\n          if (response && response.status === 200) {\n            this.src = response.data;\n            this.data = response.data;\n          }\n        } catch {\n          this.deleteNode();\n        } finally {\n          imageInputEl.value = \"\";\n        }\n      }\n    }\n  }\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Image.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Image.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Image.vue?vue&type=template&id=d3a9d262&\"\nimport script from \"./Image.vue?vue&type=script&lang=js&\"\nexport * from \"./Image.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { Image as TiptapImage } from \"tiptap-extensions\";\nimport { TextSelection, Plugin } from \"tiptap\";\n\nimport ImageComponent from \"./Image.vue\";\n\nexport default class ImageNode extends TiptapImage {\n  get schema() {\n    return {\n      attrs: {\n        src: {\n          default: \"\"\n        },\n        alt: {\n          default: \"\"\n        },\n        caption: {\n          default: \"\"\n        }\n      },\n      group: \"block\",\n      selectable: false,\n      parseDOM: [\n        {\n          tag: 'img[src][data-featured-image=\"false\"]',\n          getAttrs: dom => {\n            return {\n              src: JSON.parse(dom.getAttribute(\"data-src\")),\n              alt: dom.getAttribute(\"alt\"),\n              caption: dom.getAttribute(\"caption\")\n            };\n          }\n        }\n      ],\n      toDOM: node => {\n        if (node.attrs.src === \"\") return [\"paragraph\"];\n        return [\n          \"img\",\n          {\n            ...node.attrs,\n            src: node.attrs.src && node.attrs.src.fallback,\n            \"data-src\": JSON.stringify(node.attrs.src),\n            \"data-featured-image\": false\n          }\n        ];\n      }\n    };\n  }\n\n  commands({ type }) {\n    return ({ src, addImageAt }) => (state, dispatch) => {\n      let { tr, schema } = state;\n      if (tr.doc.content.size - addImageAt === 1)\n        tr = tr.insert(tr.doc.content.size, schema.nodes[\"paragraph\"].create());\n      let textSelection = TextSelection.create(tr.doc, addImageAt, addImageAt);\n      tr = tr\n        .setSelection(textSelection)\n        .replaceSelectionWith(type.create({ src }));\n      return dispatch(tr);\n    };\n  }\n\n  get plugins() {\n    return [\n      new Plugin({\n        props: {\n          handleDOMEvents: {\n            drop: (view, event) => {\n              const hasFiles =\n                event.dataTransfer &&\n                event.dataTransfer.files &&\n                event.dataTransfer.files.length;\n\n              if (!hasFiles) {\n                return;\n              }\n\n              const images = Array.from(event.dataTransfer.files).filter(file =>\n                /image/i.test(file.type)\n              );\n\n              if (images.length === 0) {\n                return;\n              }\n\n              event.preventDefault();\n\n              const { schema } = view.state;\n              const coordinates = view.posAtCoords({\n                left: event.clientX,\n                top: event.clientY\n              });\n              const fImgPos = view.fImg.getPos();\n\n              images.forEach(image => {\n                const reader = new FileReader();\n\n                reader.onload = readerEvent => {\n                  this.commands({ type: schema.nodes.image })({\n                    src: { fallback: readerEvent.target.result, file: image },\n                    addImageAt:\n                      coordinates.pos <= fImgPos + 1\n                        ? fImgPos + 1\n                        : coordinates.pos\n                  })(view.state, view.dispatch);\n                };\n                reader.readAsDataURL(image);\n              });\n            }\n          }\n        }\n      })\n    ];\n  }\n\n  get view() {\n    return {\n      props: [\"node\", \"updateAttrs\", \"view\", \"getPos\", \"options\"],\n      components: {\n        ImageComponent\n      },\n      template: `\n        <ImageComponent\n          :node='this.node'\n          :updateAttrs='this.updateAttrs'\n          :view='this.view'\n          :getPos='this.getPos'\n          :options='this.options'\n        ></ImageComponent>\n      `\n    };\n  }\n}\n","import { Node } from \"tiptap\";\nimport { TextSelection } from \"tiptap\";\nimport browser from \"../../utils/browser\";\n\nexport default class Title extends Node {\n  get name() {\n    return \"title\";\n  }\n\n  get schema() {\n    return {\n      content: \"inline*\",\n      parseDOM: [\n        {\n          tag: \"h1\"\n        }\n      ],\n      toDOM: () => [\"h1\", 0],\n      marks: \"\"\n    };\n  }\n  keys() {\n    return {\n      Enter: (state, dispatch, view) => {\n        let {\n          tr,\n          selection: { anchor: anchorAfterEnterKeydown },\n          schema: {\n            nodes: { paragraph }\n          }\n        } = state;\n        let anchor = anchorAfterEnterKeydown;\n        let anchorAtEnterKeydown = view.selectionAtEnterKeydown.anchor;\n\n        if (browser.ios) anchor = anchorAtEnterKeydown;\n        if (tr.doc.resolve(anchor).parent.type.name !== \"title\") {\n          if (\n            browser.ios &&\n            anchorAfterEnterKeydown - anchorAtEnterKeydown === 2 &&\n            !tr.doc.resolve(anchorAtEnterKeydown).parentOffset\n          ) {\n            let textSelection = TextSelection.create(\n              tr.doc,\n              anchor,\n              anchor + 2\n            );\n            tr = tr.setSelection(textSelection).deleteSelection();\n            dispatch(tr);\n          }\n          return false;\n        }\n        if (tr.doc.nodeAt(anchor + 3).textContent)\n          tr = tr.insert(anchor + 3, paragraph.create());\n        let textSelection = TextSelection.create(\n          tr.doc,\n          anchor + 4,\n          anchor + 4\n        );\n        tr = tr.setSelection(textSelection);\n        dispatch(tr);\n        return true;\n      },\n      Backspace: (state, dispatch, { fImg }) => {\n        let {\n          tr,\n          selection: { anchor, empty }\n        } = state;\n        const currentNode = tr.doc.resolve(anchor).parent.type.name;\n\n        const nodeAt2 = tr.doc.nodeAt(anchor - 2);\n        if (\n          nodeAt2 &&\n          (nodeAt2.type.name === \"image\" ||\n            (nodeAt2.type.name === \"embed\" && nodeAt2.attrs.type === \"link\") ||\n            (nodeAt2.type.name === \"featuredimage\" &&\n              (fImg.dataUrl || nodeAt2.attrs.src)))\n        ) {\n          return true;\n        }\n\n        if (\n          empty &&\n          currentNode !== \"header\" &&\n          currentNode !== \"title\" &&\n          tr.doc.resolve(anchor - 3).parent.type.name === \"header\"\n        ) {\n          let textSelection = TextSelection.create(\n            tr.doc,\n            anchor - 4,\n            anchor - 4\n          );\n          dispatch(tr.setSelection(textSelection));\n          return true;\n        }\n        return false;\n      }\n    };\n  }\n}\n","import { Node } from \"tiptap\";\nimport { chainCommands, exitCode } from \"tiptap-commands\";\nimport { TextSelection } from \"tiptap\";\n\nexport default class LockNode extends Node {\n  // name of the component\n  get name() {\n    return \"lock\";\n  }\n\n  get defaultOptions() {\n    return {\n      text: `Only paid subscribers can see content below`\n    };\n  }\n\n  get schema() {\n    return {\n      // here you have to specify all values that can be stored in this node\n      group: \"block\",\n      selectable: false,\n      // parseDOM and toDOM is still required to make copy and paste work\n      parseDOM: [{ tag: \"div\" }],\n      toDom: () => [\"div\"]\n    };\n  }\n\n  commands({ type }) {\n    return attrs => (state, dispatch) => {\n      let { tr, schema } = state;\n      if (tr.doc.content.size - tr.selection.head === 1)\n        tr = tr.insert(tr.doc.content.size, schema.nodes[\"paragraph\"].create());\n      let textSelection = TextSelection.create(\n        tr.doc,\n        tr.selection.head,\n        tr.selection.head\n      );\n      tr = tr\n        .setSelection(textSelection)\n        .replaceSelectionWith(type.create(attrs));\n      return dispatch(tr);\n    };\n  }\n\n  keys({ type }) {\n    const command = chainCommands(exitCode, (state, dispatch) => {\n      dispatch(state.tr.replaceSelectionWith(type.create()).scrollIntoView());\n      return true;\n    });\n    return {\n      \"Ctrl-Shift-l\": command\n    };\n  }\n\n  get view() {\n    const options = this.options;\n    return {\n      data() {\n        return {\n          text: options.text\n        };\n      },\n      props: [\"node\", \"updateAttrs\", \"view\"],\n      template: `\n        <div>\n          <div @paste.stop style=\"text-align:center\">\n            {{text}}\n          </div>\n        </div>\n      `\n    };\n  }\n}\n","import { HorizontalRule as TiptapHorizontalRule } from \"tiptap-extensions\";\n\nexport default class HorizontalRuleNode extends TiptapHorizontalRule {\n  get schema() {\n    return {\n      group: \"block\",\n      selectable: false,\n      parseDOM: [{ tag: \"hr\" }],\n      toDOM: () => [\"hr\"]\n    };\n  }\n\n  commands({ type }) {\n    return attrs => (state, dispatch) => {\n      let { tr, schema } = state;\n      if (tr.doc.content.size - tr.selection.head === 1)\n        tr = tr.insert(tr.doc.content.size, schema.nodes[\"paragraph\"].create());\n      tr = tr.replaceSelectionWith(type.create(attrs));\n      return dispatch(tr);\n    };\n  }\n}\n","import { Node } from \"tiptap\";\n\nexport default class Title extends Node {\n  get name() {\n    return \"header\";\n  }\n\n  get schema() {\n    return {\n      content: \"title\",\n      selectable: false,\n      parseDOM: [\n        {\n          tag: \"header\"\n        }\n      ],\n      toDOM: () => [\"header\", 0]\n    };\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{class:{ 'upload-picture-block': !_vm.data.fallback },staticStyle:{\"position\":\"relative\"}},[(!_vm.data.fallback)?[_c('i',{staticClass:\"upload-icon\"}),_c('span',[_vm._v(\"Upload feature image (optional)\")]),_c('input',{ref:\"fileInput\",staticStyle:{\"position\":\"absolute\",\"opacity\":\"0\",\"top\":\"0px\",\"left\":\"0px\",\"height\":\"100%\",\"width\":\"100%\",\"margin-top\":\"0px\",\"margin-bottom\":\"0px\"},attrs:{\"type\":\"file\"},on:{\"change\":function($event){return _vm.previewFiles()}}})]:_vm._e(),(_vm.data.fallback)?_c('figure',{staticClass:\"featured-image\",class:{ selected: _vm.shouldShowClose }},[_c('div',{staticClass:\"close-button\",on:{\"click\":_vm.removeImage}},[_c('i',{staticClass:\"close-icon\"})]),_c('picture',{on:{\"click\":_vm.onImageClick}},[(_vm.data.image)?_c('source',{attrs:{\"srcset\":_vm.data.image,\"type\":\"image\"}}):_vm._e(),_c('source',{attrs:{\"srcset\":_vm.data.fallback,\"type\":\"image\"}}),_c('img',{attrs:{\"src\":_vm.data.fallback},on:{\"load\":_vm.loaded}})]),_c('figcaption',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.caption),expression:\"caption\"}],attrs:{\"placeholder\":\"Type caption for image (optional)\"},domProps:{\"value\":(_vm.caption)},on:{\"keydown\":_vm.handleKeydown,\"paste\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.caption=$event.target.value}}})])]):_vm._e()],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div\n      :class=\"{ 'upload-picture-block': !data.fallback }\"\n      style=\"position: relative;\"\n    >\n      <template v-if=\"!data.fallback\">\n        <i class=\"upload-icon\"></i>\n        <span>Upload feature image (optional)</span>\n        <input\n          type=\"file\"\n          ref=\"fileInput\"\n          style=\"position: absolute; opacity: 0; top: 0px; left: 0px; height: 100%; width: 100%; margin-top: 0px; margin-bottom: 0px\"\n          @change=\"previewFiles()\"\n        />\n      </template>\n      <figure\n        v-if=\"data.fallback\"\n        class=\"featured-image\"\n        :class=\"{ selected: shouldShowClose }\"\n      >\n        <div class=\"close-button\" @click=\"removeImage\">\n          <i class=\"close-icon\"></i>\n        </div>\n        <picture @click=\"onImageClick\">\n          <source v-if=\"data.image\" :srcset=\"data.image\" type=\"image\" />\n          <source :srcset=\"data.fallback\" type=\"image\" />\n          <img :src=\"data.fallback\" @load=\"loaded\" />\n        </picture>\n        <figcaption>\n          <input\n            v-model=\"caption\"\n            placeholder=\"Type caption for image (optional)\"\n            @keydown=\"handleKeydown\"\n            @paste.stop\n          />\n        </figcaption>\n      </figure>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { TextSelection } from \"tiptap\";\nimport { isDataURL } from \"./../../../utils\";\n\nexport default {\n  name: \"FeatureImage\",\n  props: [\"node\", \"updateAttrs\", \"view\", \"getPos\", \"options\"],\n  data() {\n    return {\n      data: this.node.attrs.src,\n      shouldShowClose: false\n    };\n  },\n  inject: [\"getEditorVm\"],\n  watch: {\n    \"node.attrs.src\"(newValue) {\n      if (!this.data.fallback) this.data = newValue;\n    }\n  },\n  computed: {\n    src: {\n      get() {\n        return this.node.attrs.src;\n      },\n      set(src) {\n        this.updateAttrs({\n          src\n        });\n      }\n    },\n    caption: {\n      get() {\n        return this.node.attrs.caption;\n      },\n      set(caption) {\n        this.updateAttrs({\n          caption\n        });\n      }\n    }\n  },\n  mounted() {\n    this.view.fImg = this;\n    this.getEditorVm().$watch(\"selectedEl\", value => {\n      if (this.shouldShowClose && value !== this.$el)\n        this.shouldShowClose = false;\n    });\n  },\n  methods: {\n    handleKeydown(event) {\n      let {\n        state: { tr }\n      } = this.view;\n      const pos = this.getPos();\n      if (event.key === \"Enter\") {\n        let textSelection = TextSelection.create(tr.doc, pos + 2, pos + 2);\n        this.view.dispatch(tr.setSelection(textSelection));\n        this.view.focus();\n        event.preventDefault();\n      }\n    },\n    previewFiles() {\n      const file = this.$refs.fileInput.files[0];\n\n      const imageType = /image.*/;\n      if (file.type.match(imageType)) {\n        const reader = new FileReader();\n        reader.onload = async () => {\n          const img = new Image();\n          img.src = reader.result;\n          this.data = { fallback: img.src };\n\n          const formData = new FormData();\n          formData.append(\"image\", file);\n          try {\n            const response = await this.options.uploadImage(formData);\n            if (response && response.status === 200) {\n              this.src = response.data;\n              this.data = response.data;\n            }\n          } catch {\n            this.src = \"\";\n            this.data = \"\";\n          }\n        };\n        reader.readAsDataURL(file);\n      }\n    },\n    loaded() {\n      if (this.caption) return;\n      this.caption = \" \";\n      this.$nextTick(() => {\n        this.caption = \"\";\n      });\n    },\n    removeImage() {\n      this.src = \"\";\n      this.data = \"\";\n    },\n    onImageClick() {\n      if (isDataURL(this.data && this.data.fallback) === false)\n        this.shouldShowClose = !this.shouldShowClose;\n      this.options.onSelection(this.shouldShowClose ? this.$el : \"\");\n    }\n  }\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FeatureImage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FeatureImage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FeatureImage.vue?vue&type=template&id=b43c8292&\"\nimport script from \"./FeatureImage.vue?vue&type=script&lang=js&\"\nexport * from \"./FeatureImage.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { Image as TiptapImage } from \"tiptap-extensions\";\nimport { TextSelection } from \"tiptap\";\n\nimport ImageComponent from \"./FeatureImage.vue\";\n\nexport default class ImageNode extends TiptapImage {\n  get name() {\n    return \"featuredimage\";\n  }\n\n  get schema() {\n    return {\n      attrs: {\n        src: {\n          default: \"\"\n        },\n        alt: {\n          default: \"\"\n        },\n        caption: {\n          default: \"\"\n        }\n      },\n      group: \"block\",\n      selectable: false,\n      toDOM: node => [\"img\", { ...node.attrs, \"data-featured-image\": true }]\n    };\n  }\n\n  commands({ type }) {\n    return ({ src, addImageAt }) => (state, dispatch) => {\n      let { tr, schema } = state;\n      if (tr.doc.content.size - addImageAt === 1)\n        tr = tr.insert(tr.doc.content.size, schema.nodes[\"paragraph\"].create());\n      let textSelection = TextSelection.create(tr.doc, addImageAt, addImageAt);\n      tr = tr\n        .setSelection(textSelection)\n        .replaceSelectionWith(type.create({ src }));\n      return dispatch(tr);\n    };\n  }\n\n  get view() {\n    return {\n      props: [\"node\", \"updateAttrs\", \"view\", \"getPos\", \"options\"],\n      components: {\n        ImageComponent\n      },\n      template: `\n        <ImageComponent\n          :node='this.node'\n          :updateAttrs='this.updateAttrs'\n          :view='this.view'\n          :getPos='this.getPos'\n          :options='this.options'\n        ></ImageComponent>\n      `\n    };\n  }\n}\n","import { Mark } from \"tiptap\";\nimport { toggleMark } from \"tiptap-commands\";\n\nexport default class Superscript extends Mark {\n  get name() {\n    return \"sup\";\n  }\n\n  get schema() {\n    return {\n      parseDOM: [\n        {\n          tag: \"sup\"\n        }\n      ],\n      toDOM: () => [\"sup\", 0]\n    };\n  }\n\n  keys({ type }) {\n    return {\n      \"Ctrl-Shift-6\": toggleMark(type)\n    };\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('figure',{class:['audio-player-container', { selected: _vm.shouldShowClose }]},[_c('div',{staticClass:\"close-button\",on:{\"click\":_vm.deleteNode}},[_c('i',{staticClass:\"close-icon\"})]),_c('audio-player',{attrs:{\"src\":_vm.data,\"disabled\":_vm.disabled},on:{\"click\":_vm.handlePlayerClick,\"error\":_vm.handlePlayerError,\"loadedmetadata\":_vm.onLoadedMetaData}}),_c('figcaption',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.caption),expression:\"caption\"}],attrs:{\"placeholder\":\"Type caption for Audio (optional)\"},domProps:{\"value\":(_vm.caption)},on:{\"keydown\":_vm.handleKeydown,\"paste\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.caption=$event.target.value}}})])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <figure :class=\"['audio-player-container', { selected: shouldShowClose }]\">\n    <div class=\"close-button\" @click=\"deleteNode\">\n      <i class=\"close-icon\"></i>\n    </div>\n    <audio-player\n      :src=\"data\"\n      :disabled=\"disabled\"\n      @click=\"handlePlayerClick\"\n      @error=\"handlePlayerError\"\n      @loadedmetadata=\"onLoadedMetaData\"\n    />\n    <figcaption>\n      <input\n        v-model=\"caption\"\n        placeholder=\"Type caption for Audio (optional)\"\n        @keydown=\"handleKeydown\"\n        @paste.stop\n      />\n    </figcaption>\n  </figure>\n</template>\n\n<script>\nimport { TextSelection } from \"tiptap\";\nimport AudioPlayer from \"scroll-vue-player\";\nimport { isDataURL } from \"./../../../utils\";\n\nexport default {\n  name: \"Audio\",\n  props: [\"node\", \"updateAttrs\", \"view\", \"getPos\", \"options\", \"editor\"],\n  data() {\n    return {\n      data: this.node.attrs.src,\n      shouldShowClose: false\n    };\n  },\n  inject: [\"getEditorVm\"],\n  components: {\n    AudioPlayer\n  },\n  computed: {\n    src: {\n      get() {\n        return this.node.attrs.src;\n      },\n      set(src) {\n        this.updateAttrs({\n          src\n        });\n      }\n    },\n    caption: {\n      get() {\n        return this.node.attrs.caption;\n      },\n      set(caption) {\n        this.updateAttrs({\n          caption\n        });\n      }\n    },\n    disabled() {\n      return this.data.includes(\"data:\");\n    }\n  },\n  mounted() {\n    this.getEditorVm().$watch(\"selectedEl\", value => {\n      if (this.shouldShowClose && value !== this.$el)\n        this.shouldShowClose = false;\n    });\n  },\n  methods: {\n    handleKeydown(event) {\n      let {\n        state: { tr }\n      } = this.view;\n      const pos = this.getPos();\n      if (event.key === \"Enter\") {\n        let textSelection = TextSelection.create(tr.doc, pos + 2, pos + 2);\n        this.view.dispatch(tr.setSelection(textSelection));\n        this.view.focus();\n        event.preventDefault();\n      }\n    },\n    deleteNode() {\n      let {\n        state: { tr }\n      } = this.view;\n      const pos = this.getPos();\n      let textSelection = TextSelection.create(tr.doc, pos, pos + 1);\n      this.view.dispatch(\n        tr.setSelection(textSelection).deleteSelection(this.src)\n      );\n      this.view.focus();\n    },\n    handlePlayerError(e) {\n      this.options.handleError(e, \"audio-media\");\n    },\n    handlePlayerClick({ target }) {\n      const button = this.$el.querySelector(\".player-button\");\n      this.setCursorBelowBlock();\n      if (button.contains(target)) return;\n      if (!isDataURL(this.data)) this.shouldShowClose = !this.shouldShowClose;\n      this.options.onSelection(this.shouldShowClose ? this.$el : \"\");\n    },\n    async onLoadedMetaData() {\n      const audioInputEl = document.getElementById(\"audio-input\");\n\n      if (this.data.includes(\"data:\") && audioInputEl.files.length != 0) {\n        const file = audioInputEl.files[0];\n        const formData = new FormData();\n        formData.append(\"audio\", file);\n\n        try {\n          const response = await this.options.uploadAudio(formData);\n          if (response && response.status === 200) {\n            this.src = response.data.audio;\n            this.data = response.data.audio;\n          }\n        } catch (error) {\n          this.deleteNode();\n        } finally {\n          audioInputEl.value = \"\";\n        }\n      }\n    },\n    setCursorBelowBlock() {\n      const newPos = this.getPos() + 2;\n      this.editor.focus(newPos, newPos);\n    }\n  }\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Audio.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Audio.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Audio.vue?vue&type=template&id=549fb56c&\"\nimport script from \"./Audio.vue?vue&type=script&lang=js&\"\nexport * from \"./Audio.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { Node } from \"tiptap\";\nimport { TextSelection } from \"tiptap\";\n\nimport Audio from \"./Audio.vue\";\n\nexport default class AudioNode extends Node {\n  get name() {\n    return \"audio\";\n  }\n\n  get schema() {\n    return {\n      attrs: {\n        src: {\n          default: \"\"\n        },\n        caption: {\n          default: \"\"\n        }\n      },\n      group: \"block\",\n      selectable: false,\n      parseDOM: [\n        {\n          tag: this.name,\n          getAttrs: dom => {\n            return {\n              src: dom.getAttribute(\"src\"),\n              caption: dom.getAttribute(\"caption\")\n            };\n          }\n        }\n      ],\n      toDOM: node => [\"audio\", node.attrs]\n    };\n  }\n\n  commands({ type }) {\n    return ({ src, addAudioAt }) => (state, dispatch) => {\n      let { tr, schema } = state;\n      if (tr.doc.content.size - addAudioAt === 1)\n        tr = tr.insert(tr.doc.content.size, schema.nodes[\"paragraph\"].create());\n      let textSelection = TextSelection.create(tr.doc, addAudioAt, addAudioAt);\n      tr = tr\n        .setSelection(textSelection)\n        .replaceSelectionWith(type.create({ src }));\n      return dispatch(tr);\n    };\n  }\n\n  get view() {\n    return {\n      props: [\"node\", \"updateAttrs\", \"view\", \"getPos\", \"options\", \"editor\"],\n      components: {\n        Audio\n      },\n      template: `\n        <Audio\n          :node='this.node'\n          :updateAttrs='this.updateAttrs'\n          :view='this.view'\n          :getPos='this.getPos'\n          :options='this.options'\n          :editor='this.editor'\n        ></Audio>\n      `\n    };\n  }\n}\n","import { Extension, Plugin } from \"tiptap\";\nimport { Decoration, DecorationSet } from \"prosemirror-view\";\n\nexport default class Placeholder extends Extension {\n  get name() {\n    return \"placeholder\";\n  }\n\n  get defaultOptions() {\n    return {\n      emptyEditorClass: \"is-editor-empty\",\n      emptyNodeClass: \"is-empty\",\n      emptyNodeText: \"Write something …\",\n      showOnlyWhenEditable: true,\n      showOnlyCurrent: true\n    };\n  }\n\n  get update() {\n    return view => {\n      view.updateState(view.state);\n    };\n  }\n\n  get plugins() {\n    return [\n      new Plugin({\n        props: {\n          decorations: ({ doc, plugins, selection }) => {\n            const editablePlugin = plugins.find(plugin =>\n              plugin.key.startsWith(\"editable$\")\n            );\n            const editable = editablePlugin.props.editable();\n            const active = editable || !this.options.showOnlyWhenEditable;\n            const { anchor } = selection;\n            const decorations = [];\n            if (!active) {\n              return false;\n            }\n\n            doc.descendants((node, pos) => {\n              const hasAnchor = anchor >= pos && anchor <= pos + node.nodeSize;\n              const isHeaderNode = node.type.name === \"header\";\n              const isPlaceHolderNode =\n                isHeaderNode || node.type.name === \"paragraph\";\n              const isNodeEmpty =\n                node.content.size === 0 ||\n                (isHeaderNode && node.content.size === 2);\n              if (\n                (hasAnchor || !this.options.showOnlyCurrent) &&\n                isNodeEmpty &&\n                isPlaceHolderNode\n              ) {\n                const classes = [this.options.emptyNodeClass];\n\n                const from = isHeaderNode ? pos + 1 : pos;\n                const to = isHeaderNode\n                  ? pos + node.firstChild.nodeSize + 1\n                  : pos + node.nodeSize;\n\n                const decoration = Decoration.node(from, to, {\n                  class: classes.join(\" \"),\n                  \"data-empty-text\":\n                    typeof this.options.emptyNodeText === \"function\"\n                      ? this.options.emptyNodeText(node)\n                      : this.options.emptyNodeText\n                });\n                decorations.push(decoration);\n              }\n\n              return false;\n            });\n\n            return DecorationSet.create(doc, decorations);\n          }\n        }\n      })\n    ];\n  }\n}\n","export function keyEvent(keyCode, key) {\n  let event = document.createEvent(\"Event\");\n  event.initEvent(\"keydown\", true, true);\n  event.keyCode = keyCode;\n  event.key = event.code = key;\n  return event;\n}\n","<template>\n  <div class=\"editor\">\n    <article>\n      <editor-menu-bubble :editor=\"editor\" />\n      <editor-floating-menu\n        :editor=\"editor\"\n        ref=\"floatingMenu\"\n        :before-upload=\"beforeUpload\"\n      />\n      <editor-content id=\"editor\" class=\"editor__content\" :editor=\"editor\" />\n      <div class=\"ios-test-fix\">empt</div>\n    </article>\n  </div>\n</template>\n\n<script>\nimport { Editor, EditorContent, TextSelection } from \"tiptap\";\nimport {\n  Blockquote,\n  HardBreak,\n  Heading,\n  ListItem,\n  OrderedList,\n  Bold,\n  Italic,\n  Link,\n  History,\n  TrailingNode\n} from \"tiptap-extensions\";\nimport { findChildren } from \"prosemirror-utils\";\n\nimport EditorFloatingMenu from \"./EditorFloatingMenu.vue\";\nimport EditorMenuBubble from \"./EditorMenuBubble.vue\";\nimport {\n  Embed,\n  Image,\n  FeatureImage,\n  // Lock,\n  Doc,\n  Title,\n  HorizontalRule,\n  Header,\n  Superscript,\n  Audio\n} from \"./blocks\";\nimport Placeholder from \"./../extensions/Placeholder\";\nimport browser from \"../utils/browser\";\nimport { keyEvent } from \"../utils/dom\";\n\nconst defaultContent = {\n  type: \"doc\",\n  content: [\n    {\n      type: \"featuredimage\",\n      attrs: {\n        src: \"\",\n        caption: \"\",\n        alt: \"\"\n      }\n    },\n    {\n      type: \"paragraph\"\n    }\n  ]\n};\n\nexport default {\n  name: \"Article\",\n  props: {\n    onUpdatePost: {\n      type: Function,\n      required: true\n    },\n    content: {\n      type: Object,\n      default: function() {\n        return defaultContent;\n      },\n      required: true\n    },\n    title: {\n      type: String,\n      required: false\n    },\n    uploadImage: {\n      type: Function,\n      required: true\n    },\n    uploadAudio: {\n      type: Function,\n      required: true\n    },\n    getEmbeds: {\n      type: Function,\n      required: true\n    },\n    handleError: {\n      type: Function,\n      default: () => {}\n    },\n    beforeUpload: {\n      type: Function,\n      default: () => true\n    }\n  },\n  components: {\n    EditorContent,\n    EditorFloatingMenu,\n    EditorMenuBubble\n  },\n  data() {\n    return {\n      error: {\n        occurred: false,\n        message: \"\",\n        name: \"\"\n      },\n      data: this.content,\n      editable: true,\n      selectedEl: undefined,\n      editor: new Editor({\n        autoFocus: false,\n        editable: true,\n        extensions: [\n          new Doc(),\n          new Bold(),\n          new Blockquote(),\n          new Italic(),\n          new Title(),\n          new Header(),\n          new Placeholder({\n            showOnlyCurrent: false,\n            emptyNodeText: this.emptyNodeText\n          }),\n          new HardBreak(),\n          new Heading({ levels: [3, 5] }),\n          new ListItem(),\n          new OrderedList(),\n          new Link(),\n          new History(),\n          new TrailingNode({\n            node: \"paragraph\",\n            notAfter: [\"paragraph\"]\n          }),\n          new Image({\n            uploadImage: this.uploadImage,\n            onSelection: this.onSelection\n          }),\n          new Audio({\n            uploadAudio: this.uploadAudio,\n            handleError: this.handleError,\n            onSelection: this.onSelection\n          }),\n          new FeatureImage({\n            uploadImage: this.uploadImage,\n            onSelection: this.onSelection\n          }),\n          new Embed({\n            getEmbeds: this.getEmbeds,\n            onSelection: this.onSelection\n          }),\n          new HorizontalRule(),\n          new Superscript()\n          // new Lock()\n        ],\n        onUpdate: ({ getJSON }) => {\n          const data = getJSON();\n          const title = this.editor.state.doc.firstChild.textContent;\n\n          data.content.shift();\n          data.content = data.content.filter(block => {\n            if (\n              (block.type === \"image\" &&\n                block.attrs.src &&\n                block.attrs.src.fallback.includes(\"data:\")) ||\n              (block.type === \"audio\" &&\n                block.attrs.src &&\n                block.attrs.src.includes(\"data:\"))\n            ) {\n              return false;\n            }\n            return true;\n          });\n          this.onUpdatePost({ blocks: data, title });\n        },\n        editorProps: {\n          handlePaste: (view, event, slice) => {\n            const singleNode =\n              slice.openStart == 0 &&\n              slice.openEnd == 0 &&\n              slice.content.childCount == 1\n                ? slice.content.firstChild\n                : null;\n            let tr = singleNode\n              ? view.state.tr.replaceSelectionWith(singleNode, view.shiftKey)\n              : view.state.tr.replaceSelection(slice);\n            // current cursor position\n            const anchor = tr.selection.anchor;\n            // find featured image blocks\n            const nodes = findChildren(\n              tr.doc,\n              child => child.type.name === \"featuredimage\",\n              false\n            );\n            // if multiple featured image blocks\n            if (nodes.length > 1) {\n              let textSelection = TextSelection.create(\n                tr.doc,\n                nodes[1].pos,\n                nodes[1].pos + 1\n              );\n              // select and delete block\n              tr = tr.setSelection(textSelection).deleteSelection();\n              // keep cursor and last anchor positoin\n              textSelection = TextSelection.create(tr.doc, anchor, anchor);\n              tr = tr.setSelection(textSelection);\n            }\n            view.dispatch(\n              tr\n                .scrollIntoView()\n                .setMeta(\"paste\", true)\n                .setMeta(\"uiEvent\", \"paste\")\n            );\n            this.handleAfterPaste(view);\n            return true;\n          },\n          handleDOMEvents: {\n            beforeinput: (view, event) => {\n              // We should probably do more with beforeinput events, but support\n              // is so spotty that I'm still waiting to see where they are going.\n\n              // Very specific hack to deal with backspace sometimes failing on\n              // Chrome Android when after an uneditable node.\n              if (\n                browser.chrome &&\n                browser.android &&\n                event.inputType == \"deleteContentBackward\"\n              ) {\n                const cursorBeforeDelete = view.state.selection.$cursor;\n                let { domChangeCount } = view;\n                setTimeout(() => {\n                  if (view.domChangeCount != domChangeCount) return; // Event already had some effect\n                  // This bug tends to close the virtual keyboard, so we refocus\n                  let { $cursor } = view.state.selection;\n                  view.dom.blur();\n                  cursorBeforeDelete.pos !== $cursor.pos\n                    ? this.editor.focus(\n                        cursorBeforeDelete.pos,\n                        cursorBeforeDelete.pos\n                      )\n                    : this.editor.focus();\n                  if (\n                    view.someProp(\"handleKeyDown\", f =>\n                      f(view, keyEvent(8, \"Backspace\"))\n                    )\n                  )\n                    return;\n                  // Crude approximation of backspace behavior when no command handled it\n                  if ($cursor && $cursor.pos > 0)\n                    view.dispatch(\n                      view.state.tr\n                        .delete($cursor.pos - 1, $cursor.pos)\n                        .scrollIntoView()\n                    );\n                }, 50);\n              }\n              return true;\n            },\n            keydown: (view, event) => {\n              if (event.keyCode === 13)\n                view.selectionAtEnterKeydown = view.state.selection;\n              return false;\n            }\n          }\n        }\n      })\n    };\n  },\n  provide() {\n    return {\n      getEditorVm: () => {\n        return this;\n      }\n    };\n  },\n  mounted() {\n    // init data\n    const newContent = this.addTitle(\n      this.content || defaultContent,\n      this.title\n    );\n    this.editor.setContent(newContent, false);\n    window.view = this.editor.view;\n  },\n  methods: {\n    addTitle(data, title) {\n      if (data.content.length === 0) return;\n      let newData = data;\n      newData.content = [\n        {\n          type: \"header\",\n          content: [\n            {\n              type: \"title\",\n              content: title ? [{ type: \"text\", text: title }] : []\n            }\n          ]\n        },\n        ...newData.content\n      ];\n      return newData;\n    },\n    emptyNodeText(node) {\n      if (node.type.name === \"header\") {\n        return \"Title\";\n      }\n      if (this.editor) {\n        const { doc } = this.editor.state;\n        if (\n          doc.childCount === 3 &&\n          node.type.name === \"paragraph\" &&\n          !this.$refs.floatingMenu.shouldShowMenu\n        )\n          return \"Start writing here\";\n      }\n      return \"\";\n    },\n    handleAfterPaste({ state, dispatch }) {\n      const { doc, schema, tr, selection } = state;\n      const childAfterCursor = doc.childAfter(selection.anchor + 1);\n      if (\n        childAfterCursor.node &&\n        childAfterCursor.node.type.name === \"paragraph\" &&\n        childAfterCursor.node.nodeSize === 2\n      ) {\n        this.editor.setSelection(selection.anchor + 2, selection.anchor + 2);\n      } else if (\n        !childAfterCursor.node &&\n        doc.content.size === selection.anchor + 1\n      ) {\n        const type = schema.nodes[\"paragraph\"];\n        const transaction = tr.insert(doc.content.size, type.create());\n        dispatch(transaction);\n        this.editor.setSelection(selection.anchor + 2, selection.anchor + 2);\n      }\n    },\n    onSelection(el) {\n      this.selectedEl = el;\n    }\n  },\n  watch: {\n    editable() {\n      this.editor.setOptions({\n        editable: this.editable\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n.editor *.is-empty:nth-child(1)::before,\n.editor *.is-empty:nth-child(3)::before {\n  float: left;\n  content: attr(data-empty-text);\n  pointer-events: none;\n  height: 0;\n}\n\n.dot {\n  height: 15px;\n  width: 15px;\n  background-color: black;\n  border-radius: 50%;\n  display: inline-block;\n}\n\n.ProseMirror [contenteditable=\"false\"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable=\"true\"] {\n  white-space: pre-wrap;\n}\n\n.highlight-menu-input {\n  z-index: 1001;\n}\n\n.link-menu-active {\n  display: none;\n}\n\n.ios-test-fix {\n  visibility: hidden;\n  height: 500px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Article.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Article.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Article.vue?vue&type=template&id=6cf56d3e&\"\nimport script from \"./Article.vue?vue&type=script&lang=js&\"\nexport * from \"./Article.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Article.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"demo\">\n    <div class=\"article-container\">\n      <Article\n        :onUpdatePost=\"onUpdatePost\"\n        :uploadImage=\"uploadImage\"\n        :uploadAudio=\"uploadAudio\"\n        :getEmbeds=\"getEmbeds\"\n        :content=\"getContent()\"\n        delayUpdateBy=\"300\"\n      />\n    </div>\n    <vue-json-pretty :path=\"'res'\" :data=\"blocks\"></vue-json-pretty>\n  </div>\n</template>\n\n<script>\nimport VueJsonPretty from \"vue-json-pretty\";\nimport Article from \"./components/Article.vue\";\n\nimport \"@/assets/scss/base.scss\";\nimport \"@/assets/scss/editor.scss\";\nimport \"@/assets/scss/article.scss\";\n\nconst defaultContent = {\n  type: \"doc\",\n  content: [\n    {\n      type: \"featuredimage\",\n      attrs: {\n        src: \"\",\n        caption: \"\",\n        alt: \"\"\n      }\n    },\n    {\n      type: \"paragraph\"\n    }\n  ]\n};\n\nexport default {\n  name: \"Demo\",\n  data() {\n    return {\n      blocks: {}\n    };\n  },\n  components: {\n    Article,\n    VueJsonPretty\n  },\n  methods: {\n    uploadImage() {\n      // return promise with upload image url\n      // console.log(formData);\n    },\n    uploadAudio() {\n      // return promise with upload Audio\n      // console.log(formData);\n    },\n    getEmbeds() {\n      // Should return promise with embed URL data\n      // console.log(url);\n    },\n    onUpdatePost({ blocks, title = \"\" }) {\n      this.blocks = { title, ...blocks };\n    },\n    getContent() {\n      return defaultContent;\n    }\n  }\n};\n</script>\n<style>\n@media only screen and (min-width: 768px) {\n  .title {\n    text-align: center;\n  }\n  .demo {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n    padding: 20px;\n    border: 2px solid black;\n    margin: 25px;\n  }\n  .article-container {\n    width: 60%;\n    padding: 0 50px;\n    box-sizing: border-box;\n    margin: unset;\n    height: 730px;\n    overflow-y: scroll;\n    border-right: 2px solid black;\n  }\n  .vjs-tree.is-root {\n    position: relative;\n    width: 40%;\n    padding: 10px;\n    box-sizing: border-box;\n    height: 730px;\n    overflow-y: scroll;\n  }\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Demo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Demo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Demo.vue?vue&type=template&id=646626e0&\"\nimport script from \"./Demo.vue?vue&type=script&lang=js&\"\nexport * from \"./Demo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Demo.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <Demo />\n</template>\n\n<script>\nimport Demo from \"./Demo.vue\";\n\nexport default {\n  name: \"App\",\n  components: {\n    Demo\n  }\n};\n</script>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=a3f50d9c&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport App from \"./App.vue\";\n\nVue.config.productionTip = false;\n\nnew Vue({\n  render: h => h(App)\n}).$mount(\"#app\");\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Article.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Article.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}